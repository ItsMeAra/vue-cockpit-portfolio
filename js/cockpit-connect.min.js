var cockpitConnect=function(){var t={cockpitUrl:"localhost"==location.hostname?"http://localhost:8000/admin":location.protocol+"//"+location.hostname+location.pathname+"admin",apiKey:"fcfaf298e1e7ba680da3ca07af3dda",selector:"#app",basePath:location.pathname.slice(0,-1),collections:{},regions:{}},n=window.location.search.indexOf("hint")>=0,i=n?"Hide hints":"Show hints";if($("body").append('<button id="toggleSegmentHints" class="" style="position: fixed; top: 0; right: 0; background-color: #000; color: #fff; border: 0; font-size: 14px; padding: 10px 15px;">'+i+"</button>"),$("#toggleSegmentHints").click(function(){window.location.href=n?window.location.href.replace("?hints",""):window.location.href+"?hints"}),n>0){var o=function(t,n,i,o){0==t.parents(".has-binding").length&&(t.css("outline","1px dashed red").css("cursor","pointer"),t.attr("entity-type",n),t.attr("entity-name",i),t.attr("title",n+" > "+i+(o&&-1==o.indexOf(" ")?" > "+o:"")),t.addClass("has-binding"))};$(':not(:has(div)):contains("{{")').each(function(){var t=$(this),n=t.text();if(n.indexOf("regions.")>0||n.indexOf("collections.")>0){var i=n.replace("{{","").replace("}}","").split("."),e=i[0],c=i[1],a=i[2];o(t,e,c,a)}}),$("[v-for]").each(function(){var t=$(this),n=t.attr("v-for"),i=n.indexOf(" in ")>0?"in":"of",e=n.split(" "+i+" ")[1].split(".")[0],c=n.split(".")[1],a=n.split(".")[2];o(t,e,c,a)}),$("[v-html]").each(function(){var t=$(this),n=t.attr("v-html").split("."),i=n[0],e=n[1],c=n[2];o(t,i,e,c)}),$("[v-bind\\:href]").each(function(){var t=$(this),n=t.attr("v-bind:href").split("."),i=n[1],e=n[2];o(t,"regions",i,e)}),$("[v-bind\\:src]").each(function(){var t=$(this),n=t.attr("v-bind:src").split("."),i=n[1],e=n[2];o(t,"regions",i,e)}),$("body").on("click",".has-binding",function(n){var i=$(this),o=i.attr("entity-type"),e=i.attr("entity-name"),c="regions"==o?"form":"entries",a=t.cockpitUrl+"/"+o+"/"+c+"/"+e;window.open(a)})}fetch(t.cockpitUrl+"/api/collections/listCollections?token="+t.apiKey).then(function(t){return t.json()}).then(function(n){t.collectionNames=n,n.forEach(function(n){t.collections[n]=[]}),fetch(t.cockpitUrl+"/api/regions/listRegions?token="+t.apiKey).then(function(t){return t.json()}).then(function(n){t.regionNames=n,n.forEach(function(n){t.regions[n]=[]}),new Vue({el:t.selector,data:t,created:function(){this.fetchAllCollectionEntries(),this.fetchAllRegionEntries()},methods:{fetchAllRegionEntries:function(){var t=this;this.regionNames.forEach(function(n){t.fetchRegionEntries(n)})},fetchRegionEntries:function(n){var i=this;fetch(t.cockpitUrl+"/api/regions/data/"+n+"?token="+this.apiKey).then(function(t){return t.json()}).then(function(t){i.regions[n]=t}).catch(function(t){console.log("parsing failed",t)})},fetchAllCollectionEntries:function(){var t=this;this.collectionNames.forEach(function(n){t.fetchCollectionEntries(n)})},fetchCollectionEntries:function(n){var i=this;fetch(t.cockpitUrl+"/api/collections/get/"+n+"?token="+this.apiKey).then(function(t){return t.json()}).then(function(t){i.collections[n]=t.entries}).catch(function(t){console.log("parsing failed",t)})}}})})}).catch(function(t){console.log("parsing failed",t)})};cockpitConnect();